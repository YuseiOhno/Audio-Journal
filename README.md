# Audio Journal

<img width="1423" height="808" alt="無題" src="https://github.com/user-attachments/assets/5be0a25e-40c4-433b-8535-0f3ad69e1109" />

## ■ アプリ概要

30秒の音声を録音し、タイトル・メモ・位置情報とともに保存できる音声ジャーナルアプリです。

## ■ アプリを作ったキッカケ

私は日常を映像や写真ではなく音で記録する、「フィールドレコーディング」を趣味としてます。

しかし、ICレコーダーを取り出して録音するまでには手間がかかり<br>
「今この瞬間を残したい」と思ったときに即座に記録できないこと<br>
また、既存のレコーダーアプリではパーソナルな記録に寄り添ってないことが不満でした。

このアプリはもっと手軽に日々の記憶を留めたい、音からその時の空気を想起させる体験をより身近にしたいという想いから生まれました。

## ■ アプリに込めた思い

コロナ禍以降、私にとって時間の流れは、以前よりも早く感じられるようになりました。<br>
気づけば季節が巡り、年が変わっていく——そんな現代において、音声を残すことには確かな意味があると感じています。

このアプリは、短い人生の中の「30秒」を切り取り、
その一瞬を音声という形で作品として残すためのものです。<br>
日常の中に埋もれてしまう感情や思考を、ぜひこのアプリを通して記録してほしいと思っています。

## ■ 主なページと機能

| メイン画面・アーカイブ画面                                                                                                                                                                                                                                                                        | Edit画面                                                                                                                                                                                                                                                                                                   |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <div align="center"><img width="171" height="407" alt="home" src="https://github.com/user-attachments/assets/9a6295c3-ae6c-4571-9ce6-9d9e33aea2c5" /> <img width="171" height="407" alt="archives" src="https://github.com/user-attachments/assets/207cefa8-6fd0-4585-b574-dc27567ba7db" /></div> | <div align="center"><img width="171" height="407" alt="edit_before" src="https://github.com/user-attachments/assets/219b95d0-41f1-44fb-a00f-43487b295334" /> <img width="171" height="407" alt="edit_after" src="https://github.com/user-attachments/assets/6450c577-4a43-46d5-a15d-37eae25a716a" /></div> |
| シンプルで直感的に操作できるUIを意識し<br>起動後、即座に録音を開始できるUX設計です。                                                                                                                                                                                                              | 録音終了後、タイトル・メモを入力する画面。<br>詳細画面から編集する際も再利用する設計です。                                                                                                                                                                                                                 |

| 詳細画面                                                                                                                                                                                                                                                                                                      | オーディオプレイヤー固定・ソート機能                                                                                                                                                                                                                                                                     |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <div align="center"><img width="171" height="407" alt="archives_detail" src="https://github.com/user-attachments/assets/ea52e0b9-e25a-49db-8be1-626bcb8d373b" /> <img width="171" height="407" alt="file_menu" src="https://github.com/user-attachments/assets/f18f50ba-113f-44d8-8d67-265b7fc76e1d" /></div> | <div align="center"><img width="171" height="407" alt="archives_player" src="https://github.com/user-attachments/assets/ecffc8da-fd6a-4e9a-8191-d4ce7f18e520" /> <img width="171" height="407" alt="sort" src="https://github.com/user-attachments/assets/2b2b515c-2097-4111-a629-ad7319a425cc" /></div> |
| 記録はボトムシートで表示されます。録音時に位置情報を取得しマップで視覚的に録音場所を確認できるUIにしました。ポップアップメニューからファイルの操作ができます。                                                                                                                                                | ボトムシートのスナップポイントを2箇所設定してるのでオーディオプレイヤーをヘッダーに固定できます。記録一覧には検索・ソート機能を実装しました。                                                                                                                                                            |

## ■ 工夫した箇所

#### ● 機能単位のディレクトリ構成

- featuresディレクトリを採用し、機能単位でコードを整理してます。
- 各featuresにはscreen・hook・componentなど責務に応じてファイルを閉じてます。

#### ● 一時状態と永続化の段階分離

- 録音後のキャンセルに対応するため、録音直後は`Zustand`のDraftに状態を保持し、タイトル・メモ編集後に`SQLite`へ保存する2段階フローで実装しました。

#### ● UIスレッド描画

- 録音中の波形描画では、`Reanimated`のshared valueと`Skia`のworkletを組み合わせ、パス生成処理をUIスレッド側で実行しています。

#### ● マイグレーション前提のスキーマ管理

- 将来拡張のためLATEST_VERSIONとmigration群で段階的に更新できるよう設計しました。

## ■ 主な使用技術

| カテゴリ          | 主要技術                    | 用途                                             |
| ----------------- | --------------------------- | ------------------------------------------------ |
| フロントエンド    | React Native + Expo         | iOS/Android向けクロスプラットフォームアプリ開発  |
| 開発言語          | TypeScript                  | 型安全な実装と保守性向上                         |
| 画面遷移          | Expo Router                 | ファイルベースルーティングによる画面遷移管理     |
| 状態管理          | Zustand                     | 録音・編集中データなどのアプリ状態管理           |
| データベース      | SQLite（expo-sqlite）       | 音声メタデータ（タイトル・メモ等）のローカル保存 |
| 音声機能          | expo-audio                  | 音声の録音・再生                                 |
| 位置情報          | expo-location               | 位置情報の取得                                   |
| UI/アニメーション | Tamagui / Reanimated / Skia | UI構築(一部)、アニメーション、波形描画           |

## ■ DB保存項目(recordings)

| カラム名          | 型        | 説明                                                              |
| ----------------- | --------- | ----------------------------------------------------------------- |
| `id`              | `INTEGER` | 録音レコードを一意に識別するID（主キー）。                        |
| `date_key`        | `TEXT`    | 日単位でのグルーピングや検索に使う日付キー（例: `2026-02-11`）。  |
| `created_at`      | `TEXT`    | 録音を作成した日時。                                              |
| `audio_uri`       | `TEXT`    | 保存された音声ファイルの保存先URI。再生・共有・削除時に参照する。 |
| `duration_ms`     | `INTEGER` | 録音時間（ミリ秒）。                                              |
| `lat`             | `REAL`    | 録音時に取得した緯度。位置情報が取れない場合は `NULL`。           |
| `lng`             | `REAL`    | 録音時に取得した経度。位置情報が取れない場合は `NULL`。           |
| `accuracy`        | `REAL`    | 位置情報の精度（m）。取得不可時は `NULL`。                        |
| `memo`            | `TEXT`    | 録音に紐づくメモ本文。未入力時は `NULL`。                         |
| `waveform_blob`   | `BLOB`    | 波形表示用のサンプルデータ本体（バイナリ）。                      |
| `waveform_length` | `INTEGER` | `waveform_blob` に含まれる波形サンプル数。                        |
| `recording_title` | `TEXT`    | 録音タイトル。未入力時は `NULL`。                                 |

## 8. 今後の改善案
